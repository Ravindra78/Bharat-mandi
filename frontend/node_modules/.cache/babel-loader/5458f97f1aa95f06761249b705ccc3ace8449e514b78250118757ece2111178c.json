{"ast":null,"code":"const API_URL = process.env.REACT_APP_API_URL;\nexport const apiFetch = async (endpoint, options = {}) => {\n  const token = localStorage.getItem('token');\n\n  // Agar body FormData hai → Content-Type mat set karo\n  const headers = {\n    ...options.headers,\n    ...(options.body instanceof FormData ? {} : {\n      'Content-Type': 'application/json'\n    }),\n    ...(token ? {\n      'x-auth-token': token\n    } : {})\n  };\n  const config = {\n    ...options,\n    headers\n  };\n  const response = await fetch(`${API_URL}${endpoint}`, config);\n  if (!response.ok) {\n    let errorMsg = 'API error';\n    try {\n      const data = await response.json();\n      if (data.msg) errorMsg = data.msg;\n    } catch (err) {\n      // ignore parse error\n    }\n    throw new Error(errorMsg);\n  }\n  return response.json();\n};","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","apiFetch","endpoint","options","token","localStorage","getItem","headers","body","FormData","config","response","fetch","ok","errorMsg","data","json","msg","err","Error"],"sources":["/Users/deepakmeena/Desktop/bharat_mandi copy/frontend/src/services/api.js"],"sourcesContent":["const API_URL = process.env.REACT_APP_API_URL;\r\n\r\nexport const apiFetch = async (endpoint, options = {}) => {\r\n  const token = localStorage.getItem('token');\r\n\r\n  // Agar body FormData hai → Content-Type mat set karo\r\n  const headers = {\r\n    ...options.headers,\r\n    ...(options.body instanceof FormData ? {} : { 'Content-Type': 'application/json' }),\r\n    ...(token ? { 'x-auth-token': token } : {}),\r\n  };\r\n\r\n  const config = {\r\n    ...options,\r\n    headers,\r\n  };\r\n\r\n  const response = await fetch(`${API_URL}${endpoint}`, config);\r\n\r\n  if (!response.ok) {\r\n    let errorMsg = 'API error';\r\n    try {\r\n      const data = await response.json();\r\n      if (data.msg) errorMsg = data.msg;\r\n    } catch (err) {\r\n      // ignore parse error\r\n    }\r\n    throw new Error(errorMsg);\r\n  }\r\n\r\n  return response.json();\r\n};\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;AAE7C,OAAO,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACxD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;;EAE3C;EACA,MAAMC,OAAO,GAAG;IACd,GAAGJ,OAAO,CAACI,OAAO;IAClB,IAAIJ,OAAO,CAACK,IAAI,YAAYC,QAAQ,GAAG,CAAC,CAAC,GAAG;MAAE,cAAc,EAAE;IAAmB,CAAC,CAAC;IACnF,IAAIL,KAAK,GAAG;MAAE,cAAc,EAAEA;IAAM,CAAC,GAAG,CAAC,CAAC;EAC5C,CAAC;EAED,MAAMM,MAAM,GAAG;IACb,GAAGP,OAAO;IACVI;EACF,CAAC;EAED,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGf,OAAO,GAAGK,QAAQ,EAAE,EAAEQ,MAAM,CAAC;EAE7D,IAAI,CAACC,QAAQ,CAACE,EAAE,EAAE;IAChB,IAAIC,QAAQ,GAAG,WAAW;IAC1B,IAAI;MACF,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;MAClC,IAAID,IAAI,CAACE,GAAG,EAAEH,QAAQ,GAAGC,IAAI,CAACE,GAAG;IACnC,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZ;IAAA;IAEF,MAAM,IAAIC,KAAK,CAACL,QAAQ,CAAC;EAC3B;EAEA,OAAOH,QAAQ,CAACK,IAAI,CAAC,CAAC;AACxB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}